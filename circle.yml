## Customize the test machine
machine:
  pre:
    - curl -sSL https://s3.amazonaws.com/circle-downloads/install-circleci-docker.sh | bash -s -- 1.10.0
  services:
    - docker

database:
  override:
    - echo "Skipping pg"

## Customize test commands
test:
  pre:
    - pip install docker-compose==1.10.0
  override:
    - mv config/database.ci.yml config/database.yml
    - make test

## Customize deployment commands
#https://circleci.com/docs/configuration/#deployment
deployment:
  staging:
    branch: feature/adds_circle_and_docker
    heroku:
      appname: xoit-circle-ci

#
# deployment:
#   staging:
#     tag: /qa-.*/
#     commands:
#     - make release env=qa
#
#   production:
#     tag: /v[0-9]+(\.[0-9]+)*/
#     commands:
#     - make release env=prod
